<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Cadastro de Questões</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  font-family: Arial, sans-serif;
  background: #f4f4f4;
  padding: 20px;
}

.container {
  max-width: 900px;
  background: #fff;
  padding: 20px;
  border-radius: 8px;
  margin: auto;
}

label {
  font-weight: bold;
  display: block;
  margin-top: 15px;
}

select, textarea, input[type="text"] {
  width: 100%;
  padding: 8px;
  margin-top: 5px;
}

textarea {
  resize: vertical;
}

.alternativa {
  display: flex;
  gap: 10px;
  margin-top: 8px;
}

button {
  margin-top: 20px;
  padding: 10px 16px;
  cursor: pointer;
}

/* ===== PREVIEW (não interfere no layout) ===== */
#previewContainer {
  display: none;
  margin-top: 30px;
  padding: 20px;
  border: 1px dashed #999;
  background: #fafafa;
}

#previewImagem {
  max-width: 100%;
  margin-top: 10px;
}
</style>
</head>

<body>
<div class="container">

<h2>Cadastro de Questões</h2>

<label>Módulo</label>
<select id="modulo"></select>

<label>Assunto</label>
<select id="assunto"></select>

<label>Tipo de questão</label>
<select id="tipoQuestao">
  <option value="">Selecione</option>
  <option value="objetiva">Objetiva</option>
  <option value="correlacao">Correlação</option>
</select>

<label>Enunciado</label>
<textarea id="enunciado" rows="4"></textarea>

<div id="alternativasContainer"></div>

<label>Imagem da questão (opcional)</label>
<input type="file" id="imagemQuestao" accept="image/*">

<label>Bibliografia</label>
<textarea id="bibliografia" rows="3"></textarea>

<button type="button" onclick="renderPreview()">Pré-visualizar questão</button>

<div id="previewContainer">
  <h3>Pré-visualização</h3>
  <p><strong>Módulo:</strong> <span id="pModulo"></span></p>
  <p><strong>Assunto:</strong> <span id="pAssunto"></span></p>
  <p><strong>Enunciado:</strong></p>
  <p id="pEnunciado"></p>
  <div id="pAlternativas"></div>
  <img id="previewImagem">
  <p><strong>Bibliografia:</strong></p>
  <p id="pBibliografia"></p>
</div>

<button type="submit">Enviar</button>

</div>

<script>
// ===== MÓDULOS E ASSUNTOS (INTEGRAIS) =====
const relacaoModuloAssunto = {
  "Anestesiologia": [
    "Avaliação pré-anestésica","Anestesia geral","Bloqueios centrais","Monitorização",
    "Reanimação cardiopulmonar","Reposição volêmica",
    "Intubação orotraqueal e oxigenoterapia","Segurança do paciente",
    "Gerenciamento da dor","Complicações em anestesia"
  ],
  "Dermatologia": [
    "Câncer de pele","Paraneoplasias","Farmacodermias","Leishmaniose",
    "Buloses","Lesões pigmentadas","Micoses profundas","Sífilis"
  ],
  "Farmacologia": [
    "Anticonstipantes","Antidiarreicos",
    "Antifiséticos, antieméticos, procinéticos",
    "Farmacologia da doença ácido-péptica",
    "Anti-histamínicos","Glicocorticóides",
    "Anti-tussígenos e antigripais","Farmacologia da asma"
  ],
  "Gastroenterologia": [
    "Hepatites virais","Doença ulcerosa péptica","Diarréia e parasitose",
    "Cirrose hepática e complicações","Pancreatites",
    "Intolerância e alergias alimentares","Doença inflamatória intestinal",
    "Tumores esofagogástricos","CCR",
    "Síndrome do Intestino Irritável e constipação intestinal",
    "DRGE","Hemorragia digestiva"
  ],
  "Geriatria": [
    "Alterações fisiológicas do envelhecimento",
    "Prescrição em idosos",
    "Grandes síndromes geriátricas",
    "Neurogeriatria"
  ],
  "Imunologia": [
    "Anafilaxia","Urticária","Rinite alérgica","Asma grave",
    "Alergia alimentar","Dermatite atópica",
    "Erros inatos da imunidade","Reação adversa a droga"
  ],
  "Nefrologia": [
    "Princípios do equilíbrio ácido-base","Distúrbios ácido-base (acidoses)",
    "Balanço do K / distúrbios do K","Hipercalcemia",
    "Regulação osmolar volêmica, distúrbio do Na e água",
    "Síndrome nefrótica","Glomerulonefrites e síndrome nefrítica",
    "Rim na gestação","Nefrite túbulo-intersticial",
    "Síndromes edemigênicas","Insuficiência renal aguda",
    "Doença renal crônica","Transplante renal"
  ],
  "Neurologia": [
    "1º e 2º neurônios motores","Demência","Epilepsia",
    "Doença de Parkinson e outros distúrbios do movimento",
    "Cefaleias","Doença cerebrovascular",
    "Coma e síncope","Neuropatias periféricas"
  ],
  "Urologia": [
    "Incontinência urinária","PGM","Disfunção sexual masculina",
    "Transplante renal","HPB","Trauma urológico",
    "Litíase urinária","Urgências urológicas"
  ]
};

// ===== POPULAR MÓDULO / ASSUNTO =====
const modulo = document.getElementById("modulo");
const assunto = document.getElementById("assunto");

modulo.innerHTML = '<option value="">Selecione</option>';
Object.keys(relacaoModuloAssunto).forEach(m => {
  const o = document.createElement("option");
  o.value = m; o.textContent = m;
  modulo.appendChild(o);
});

modulo.addEventListener("change", () => {
  assunto.innerHTML = '<option value="">Selecione</option>';
  (relacaoModuloAssunto[modulo.value] || []).forEach(a => {
    const o = document.createElement("option");
    o.value = a; o.textContent = a;
    assunto.appendChild(o);
  });
});

// ===== TIPO DE QUESTÃO =====
const tipoQuestao = document.getElementById("tipoQuestao");
const alternativasContainer = document.getElementById("alternativasContainer");

tipoQuestao.addEventListener("change", () => {
  alternativasContainer.innerHTML = "";

  if (tipoQuestao.value === "objetiva") {
    for (let i = 0; i < 5; i++) {
      alternativasContainer.innerHTML += `
        <div class="alternativa">
          <input type="radio" name="correta">
          <input type="text" placeholder="Alternativa ${String.fromCharCode(65+i)}">
        </div>`;
    }
  }

  if (tipoQuestao.value === "correlacao") {
    for (let i = 0; i < 2; i++) {
      alternativasContainer.innerHTML += `
        <div class="alternativa">
          <input type="text" placeholder="Coluna A">
          <input type="text" placeholder="Coluna B">
        </div>`;
    }
  }
});

// ===== IMAGEM BASE64 =====
let imagemBase64 = "";
document.getElementById("imagemQuestao").addEventListener("change", e => {
  const f = e.target.files[0];
  if (!f) return;
  const r = new FileReader();
  r.onload = () => imagemBase64 = r.result;
  r.readAsDataURL(f);
});

// ===== PREVIEW =====
function renderPreview() {
  document.getElementById("previewContainer").style.display = "block";
  document.getElementById("pModulo").textContent = modulo.value;
  document.getElementById("pAssunto").textContent = assunto.value;
  document.getElementById("pEnunciado").textContent =
    document.getElementById("enunciado").value;
  document.getElementById("pBibliografia").textContent =
    document.getElementById("bibliografia").value;

  const pAlt = document.getElementById("pAlternativas");
  pAlt.innerHTML = "<strong>Alternativas:</strong>";
  document.querySelectorAll("#alternativasContainer input[type='text']")
    .forEach((el,i) => {
      pAlt.innerHTML += `<div>${i+1}. ${el.value}</div>`;
    });

  const img = document.getElementById("previewImagem");
  if (imagemBase64) {
    img.src = imagemBase64;
    img.style.display = "block";
  } else {
    img.style.display = "none";
  }
}
</script>
</body>
</html>
