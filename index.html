<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Cadastro de Questões</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: #f5f5f5;
  padding: 20px;
}

.container {
  max-width: 900px;
  background: #fff;
  padding: 20px;
  margin: auto;
  border-radius: 8px;
}

label {
  font-weight: bold;
  margin-top: 15px;
  display: block;
}

select, textarea, input[type="text"] {
  width: 100%;
  padding: 8px;
  margin-top: 5px;
}

textarea {
  resize: vertical;
}

button {
  margin-top: 20px;
  padding: 10px 16px;
  cursor: pointer;
}

.alternativa {
  display: flex;
  gap: 10px;
  margin-top: 8px;
}

/* ================= PREVIEW ================= */
#previewContainer {
  display: none;
  margin-top: 30px;
  padding: 20px;
  border: 2px dashed #999;
  background: #fafafa;
}

#previewContainer h3 {
  margin-top: 0;
}

.preview-alternativa {
  margin: 6px 0;
}

#previewImagem {
  max-width: 100%;
  margin-top: 15px;
  border-radius: 6px;
}
/* =========================================== */
</style>
</head>

<body>
<div class="container">

<h2>Cadastro de Questões</h2>

<label>Módulo</label>
<select id="modulo"></select>

<label>Assunto</label>
<select id="assunto"></select>

<label>Tipo de questão</label>
<select id="tipoQuestao">
  <option value="">Selecione</option>
  <option value="objetiva">Objetiva</option>
  <option value="correlacao">Correlação</option>
</select>

<label>Enunciado</label>
<textarea id="enunciado" rows="4"></textarea>

<!-- ALTERNATIVAS -->
<div id="alternativasContainer"></div>

<!-- IMAGEM -->
<label>Imagem da questão (opcional)</label>
<input type="file" id="imagemQuestao" accept="image/*">

<label>Bibliografia</label>
<textarea id="bibliografia" rows="3"></textarea>

<!-- BOTÃO PREVIEW -->
<button type="button" onclick="renderPreview()">Pré-visualizar questão</button>

<!-- ================= PREVIEW ================= -->
<div id="previewContainer">
  <h3>Pré-visualização da questão</h3>

  <p><strong>Módulo:</strong> <span id="previewModulo"></span></p>
  <p><strong>Assunto:</strong> <span id="previewAssunto"></span></p>

  <p><strong>Enunciado:</strong></p>
  <p id="previewEnunciado"></p>

  <div id="previewAlternativas"></div>

  <img id="previewImagem" />

  <p><strong>Bibliografia:</strong></p>
  <p id="previewBibliografia"></p>
</div>
<!-- =========================================== -->

<button type="submit">Enviar</button>

</div>

<script>
// ================== DADOS ==================
const relacaoModuloAssunto = {
  "Anestesiologia": [
    "Avaliação pré-anestésica",
    "Anestesia geral",
    "Bloqueios centrais",
    "Monitorização",
    "Reanimação cardiopulmonar",
    "Reposição volêmica",
    "Intubação orotraqueal e oxigenoterapia",
    "Segurança do paciente",
    "Gerenciamento da dor",
    "Complicações em anestesia"
  ],
  "Dermatologia": [
    "Câncer de pele",
    "Paraneoplasias",
    "Farmacodermias",
    "Leishmaniose",
    "Buloses",
    "Lesões pigmentadas",
    "Micoses profundas",
    "Sífilis"
  ]
  // (demais módulos continuam iguais)
};

// ================== MÓDULO / ASSUNTO ==================
const moduloSelect = document.getElementById("modulo");
const assuntoSelect = document.getElementById("assunto");

moduloSelect.innerHTML = '<option value="">Selecione</option>';
Object.keys(relacaoModuloAssunto).forEach(m => {
  const opt = document.createElement("option");
  opt.value = m;
  opt.textContent = m;
  moduloSelect.appendChild(opt);
});

moduloSelect.addEventListener("change", () => {
  assuntoSelect.innerHTML = '<option value="">Selecione</option>';
  (relacaoModuloAssunto[moduloSelect.value] || []).forEach(a => {
    const opt = document.createElement("option");
    opt.value = a;
    opt.textContent = a;
    assuntoSelect.appendChild(opt);
  });
});

// ================== TIPO QUESTÃO ==================
const tipoQuestao = document.getElementById("tipoQuestao");
const alternativasContainer = document.getElementById("alternativasContainer");

tipoQuestao.addEventListener("change", () => {
  alternativasContainer.innerHTML = "";

  if (tipoQuestao.value === "objetiva") {
    for (let i = 0; i < 5; i++) {
      alternativasContainer.innerHTML += `
        <div class="alternativa">
          <input type="radio" name="correta">
          <input type="text" placeholder="Alternativa ${String.fromCharCode(65+i)}">
        </div>
      `;
    }
  }

  if (tipoQuestao.value === "correlacao") {
    for (let i = 0; i < 2; i++) {
      alternativasContainer.innerHTML += `
        <div class="alternativa">
          <input type="text" placeholder="Coluna A">
          <input type="text" placeholder="Coluna B">
        </div>
      `;
    }
  }
});

// ================== BASE64 ==================
let imagemBase64 = "";

document.getElementById("imagemQuestao").addEventListener("change", e => {
  const file = e.target.files[0];
  if (!file) return;

  const reader = new FileReader();
  reader.onload = () => imagemBase64 = reader.result;
  reader.readAsDataURL(file);
});

// ================== PREVIEW ==================
function renderPreview() {
  document.getElementById("previewContainer").style.display = "block";

  document.getElementById("previewModulo").textContent = moduloSelect.value;
  document.getElementById("previewAssunto").textContent = assuntoSelect.value;
  document.getElementById("previewEnunciado").textContent =
    document.getElementById("enunciado").value;

  document.getElementById("previewBibliografia").textContent =
    document.getElementById("bibliografia").value;

  const previewAlt = document.getElementById("previewAlternativas");
  previewAlt.innerHTML = "<strong>Alternativas:</strong>";

  document.querySelectorAll("#alternativasContainer input[type='text']")
    .forEach((el, i) => {
      const p = document.createElement("div");
      p.className = "preview-alternativa";
      p.textContent = `${i+1}. ${el.value}`;
      previewAlt.appendChild(p);
    });

  const img = document.getElementById("previewImagem");
  if (imagemBase64) {
    img.src = imagemBase64;
    img.style.display = "block";
  } else {
    img.style.display = "none";
  }
}
</script>
</body>
</html>
